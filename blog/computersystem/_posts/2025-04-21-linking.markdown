---
layout: post
title:  "ë§ì»¤(Linking)"
description: >
  ë§í‚¹(linking)ì€ ì—¬ëŸ¬ ê°œì˜ ì½”ë“œì™€ ë°ì´í„°ë¥¼ ëª¨ì•„ì„œ ì—°ê²°í•˜ì—¬ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ìˆ˜ ìžˆê³  ì‹¤í–‰ë  ìˆ˜ ìžˆëŠ” í•œ ê°œì˜ íŒŒì¼ë¡œ ë§Œë“œëŠ” ìž‘ì—…ì´ë‹¤.
image: /assets/img/blog/example-content-ii.jpg
date:   2025-04-21
image: /assets/img/blog/postimage/ComputerSystem.png
hide_last_modified: true
---

* toc  
{:toc .large-only}

**ë§í‚¹(linking)**ì€ ì—¬ëŸ¬ ê°œì˜ ì½”ë“œì™€ ë°ì´í„°ë¥¼ ëª¨ì•„ì„œ ì—°ê²°í•˜ì—¬ ë©”ëª¨ë¦¬ì— ë¡œë“œë  ìˆ˜ ìžˆê³  ì‹¤í–‰ë  ìˆ˜ ìžˆëŠ” í•œ ê°œì˜ íŒŒì¼ë¡œ ë§Œë“œëŠ” ìž‘ì—…ì´ë‹¤.

| | ë¡œë”ì— ì˜í•´ì„œ ì‹¤í–‰ | ì‘ìš©í”„ë¡œê·¸ëž¨ì— ì˜í•´ì„œ ì‹¤í–‰ |
|:---:|:---:|:---:|
| ë§ì»¤ ìˆ˜í–‰ ì‹œê¸° | ë¡œë“œ íƒ€ìž„ | ì‹¤í–‰ ì‹œ |

## ë§ì»¤ì˜ ì—­í•  

ë§ì»¤ëŠ” ë…ë¦½ì ì¸ ì»´íŒŒì¼ì„ ê°€ëŠ¥í•˜ê²Œ í•œë‹¤. ì´ ëœ»ì´ ë­ëƒí•˜ë©´, í° ê·œëª¨ì˜ ì‘ìš©í”„ë¡œê·¸ëž¨ì„ í•œ ê°œì˜ ì†ŒìŠ¤ íŒŒì¼ë¡œ êµ¬ì„±í•˜ëŠ” ëŒ€ì‹ ì— ì»´íŒŒì¼í•  ìˆ˜ ìžˆëŠ” ë³´ë‹¤ ê´€ë¦¬í•  ë§Œí•œ ê·œëª¨ì˜ ë” ìž‘ì€ ëª¨ë“ˆë“¤ë¡œ ë‚˜ëˆŒ ìˆ˜ ìžˆë‹¤. ê·¸ë¦¬ê³  ì´ê±°ë¥¼ ë³„ë„ë¡œ ìˆ˜ì •í•  ìˆ˜ ìžˆê²Œ ëœë‹¤.

- ëª¨ë“ˆ ì¤‘ì— í•œ ê°œë¥¼ ë³€ê²½í•  ë•Œ, ì´ íŒŒì¼ë§Œì„ ê°„ë‹¨ížˆ ìž¬ì»´íŒŒì¼í•˜ê³  ë‹¤ë¥¸ íŒŒì¼ë“¤ì„ ìž¬ì»´íŒŒì¼í•  í•„ìš” ì—†ì´ ì´ ì‘ìš©ì„ ë‹¤ì‹œ ë§í¬í•œë‹¤.

### ë§í‚¹ì„ ì™œ ë°°ì›Œì•¼ í• ê¹Œ?

- **í° ê·œëª¨ì˜ í”„ë¡œê·¸ëž¨ì„ ê°œë°œ**í•  ë•Œ, ë§í‚¹ì„ ì‚¬ìš©í•˜ê²Œ ë  í…ë°, **ì–´ë–»ê²Œ ë§ì»¤ê°€ ì°¸ì¡°ë¥¼ í•µê²°í•´ ë‚˜ê°€ëŠ”ì§€, ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë¬´ì—‡ì¸ì§€ë¥¼ ë°°ì›Œì„œ ë§ì»¤ ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìžˆë‹¤.**

- ì–¸ì–´ì˜ **ë³€ìˆ˜ ì˜ì—­ ê·œì¹™ì´ êµ¬í˜„ë˜ì—ˆëŠ”ì§€ ì´í•´**í•˜ëŠ”ë° ë„ì›€ì´ ëœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, **ì „ì—­ë³€ìˆ˜ì™€ ì§€ì—­ë³€ìˆ˜ì˜ ì°¨ì´**ëŠ” ë¬´ì—‡ì¸ê°€?

- **ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ëŒ€í•´ ì´í•´**í•  ìˆ˜ ìžˆë‹¤. 

ë” ì—¬ëŸ¬ê°€ì§€ê°€ ìžˆì§€ë§Œ, ë‚´ ê¸°ì¤€ì—ì„œ ì¤‘ìš”í•  ê²ƒ ê°™ì€ ë‚´ìš©ë“¤ë§Œ ë½‘ì•„ì™”ë‹¤.

## ì •ì  ì—°ê²°

**ìž¬ë°°ì¹˜ ê°€ëŠ¥í•œ ëª©ì íŒŒì¼(.o)ë“¤**ê³¼ **ëª…ë ¹ì¤„ ì¸ìžë“¤ì„ ìž…ë ¥**ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì„œ ë¡œë“œë  ìˆ˜ ìžˆê³  ì‹¤í–‰ë  ìˆ˜ ìžˆëŠ” ì™„ì „ížˆ ë§í¬ëœ ì‹¤í–‰ ê°€ëŠ¥ ëª©ì íŒŒì¼ì„ ì¶œë ¥ìœ¼ë¡œ ìƒì„±í•œë‹¤.

ì‹¤í–‰íŒŒì¼ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ë§ì»¤ëŠ” ë‘ ê°€ì§€ ì£¼ìš” ìž‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ í•¨

1. **ì‹¬ë³¼ í•´ì„(symbol resolution)** : ëª©ì íŒŒì¼ë“¤ì€ ì‹¬ë³¼ë“¤ì„ ì •ì˜í•˜ê³  ì°¸ì¡°í•˜ë©° ì—¬ê¸°ì„œ ê° ì‹¬ë³¼ì€ í•¨ìˆ˜, ì „ì—­ë³€ìˆ˜ ë˜ëŠ” ì •ì ë³€ìˆ˜(ì¦‰, Cì–¸ì–´ì—ì„œ staticìœ¼ë¡œ ì„ ì–¸ëœ ëª¨ë“  ë³€ìˆ˜ë“¤)ì— ëŒ€ì‘ëœë‹¤

- ì‹¬ë³¼ í•´ì„ì˜ **ëª©ì **ì€ **ê°ê°ì˜ ì‹¬ë³¼ ì°¸ì¡°ë¥¼ ì •í™•í•˜ê²Œ í•˜ë‚˜ì˜ ì‹¬ë³¼ ì •ì˜ì— ì—°ê²°**í•˜ëŠ” ê²ƒìž„

2. **ìž¬ë°°ì¹˜(relocation)** : ì»´íŒŒì¼ëŸ¬ì™€ ì–´ì…ˆë¸”ëŸ¬ëŠ” ì£¼ì†Œ 0ë²ˆì§€ì—ì„œ ì‹œìž‘í•˜ëŠ” ì½”ë“œì™€ ë°ì´í„° ì„¹ì…˜ë“¤ì„ ìƒì„±. ë§ì»¤ëŠ” **ì´ ì„¹ì…˜ë“¤ì„ ê° ì‹¬ë³¼ ì •ì˜ì™€ ì—°ê²°ì‹œì¼œì„œ ìž¬ë°°ì¹˜ í•˜ë©°, ì´ ì‹¬ë³¼ë“¤ë¡œ ê°€ëŠ” ëª¨ë“  ì°¸ì¡°ë“¤ì„ ìˆ˜ì •í•´ì„œ ì´ë“¤ì´ ì´ ë©”ëª¨ë¦¬ ìœ„ì¹˜ë¥¼ ê°€ë¦¬í‚¤ë„ë¡ í•œë‹¤**

## ëª©ì íŒŒì¼

ëª©ì íŒŒì¼ì—ëŠ” ì„¸ ê°€ì§€ í˜•íƒœê°€ ìžˆì–´

- ìž¬ë°°ì¹˜ ê°€ëŠ¥ ëª©ì íŒŒì¼(Relocatable object file) : í¬ë§·ì— ì»´íŒŒì¼ í•  ë•Œ **ì‹¤í–‰ ê°€ëŠ¥ ëª©ì íŒŒì¼ì„ ìƒì„±í•˜ê¸° ìœ„í•´ ë‹¤ë¥¸ ìž¬êµ¬ì„±ê°€ëŠ¥ ëª©ì íŒŒì¼ë“¤ê³¼ ê²°í•©ë  ìˆ˜ ìžˆëŠ” ë°”ì´ë„ˆë¦¬ ì½”ë“œì™€ ë°ì´í„°ë¥¼ í¬í•¨**í•œë‹¤

    - .o ë¡œ ëë‚˜ëŠ” íŒŒì¼ë“¤ì´ ê·¸ ì˜ˆì´ë‹¤

- ì‹¤í–‰ ê°€ëŠ¥ ëª©ì íŒŒì¼(Executable object file) : ë©”ëª¨ë¦¬ì— ì§ì ‘ ë³µì‚¬ë  ìˆ˜ ìžˆê³  **ì‹¤í–‰ë  ìˆ˜ ìžˆëŠ” í˜•íƒœ**ë¡œ ë°”ì´ë„ˆë¦¬ ì½”ë“œì™€ ë°ì´í„°ë¥¼ í¬í•¨

- ê³µìœ  ëª©ì íŒŒì¼(Shared object file) : ë¡œë“œíƒ€ìž„(Load time) ë˜ëŠ” ëŸ°íƒ€ìž„(Runtime)ì‹œì— ë™ì ìœ¼ë¡œ ë§í¬ë˜ê³  ë©”ëª¨ë¦¬ì— ë¡œë“œë  ìˆ˜ ìžˆëŠ” íŠ¹ìˆ˜í•œ ìœ í˜•ì˜ **ìž¬ë°°ì¹˜ ê°€ëŠ¥ ëª©ì íŒŒì¼**ì´ë‹¤

**ì»´íŒŒì¼ëŸ¬ì™€ ì–´ì…ˆë¸”ëŸ¬**ëŠ” ìž¬ë°°ì¹˜ ê°€ëŠ¥ ëª©ì íŒŒì¼ì„ ìƒì„±í•˜ê³  **ë§ì»¤**ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ ëª©ì íŒŒì¼ì„ ìƒì„±í•¨

## ìž¬ë°°ì¹˜ ê°€ëŠ¥ ëª©ì íŒŒì¼(with ELF : Executable and Linkable Format)

- **ELF** : ë¦¬ëˆ…ìŠ¤ ê°™ì€ ìœ ë‹‰ìŠ¤ ì‹œìŠ¤í…œì—ì„œ ì‹¤í–‰ íŒŒì¼ì´ë‚˜ ì˜¤ë¸Œì íŠ¸ íŒŒì¼ì„ ìœ„í•œ **í‘œì¤€ í¬ë§·**ì´ë‹¤(ì˜ˆ : .o íŒŒì¼ì´ë‚˜ a.out íŒŒì¼)

ì•„ëž˜ì˜ í‘œëŠ” ELF ìž¬ë°°ì¹˜ ê°€ëŠ¥ ëª©ì íŒŒì¼ì˜ í¬ë§·ì„ ë³´ì—¬ì¤€ë‹¤

| â”Œ | ELF header |
|:---:|:---:|
| s | .text |
| e | .rodata |
| c | .data |
| t | .bss |
| i | .symtab |
| o | .rel.text |
| n | .rel.data |
| s | .debug |
| â”” | .line |
| Describes object file sections | Section header table |

- ELF header : ELF íŒŒì¼ì˜ **ë§¨ ì²˜ìŒì— ìœ„ì¹˜í•œ ì•„ì£¼ ì¤‘ìš”í•œ ì •ë³´ ë¸”ë¡**ìœ¼ë¡œì¨, "ì´ íŒŒì¼ì€ ELF íŒŒì¼ìž…ë‹ˆë‹¤"ë¥¼ ì•Œë ¤ì£¼ê³  "ì´ íŒŒì¼ì€ ELF íŒŒì¼ìž…ë‹ˆë‹¤" ë¬¸êµ¬ëŠ” ìš´ì˜ì²´ì œë‚˜ ë§ì»¤ê°€ í™•ì¸. ì´ íŒŒì¼ì„ ìƒì„±í•œ ì›Œë“œ í¬ê¸°ì™€ ì‹œìŠ¤í…œì˜ ë°”ì´íŠ¸ ìˆœì„œë¥¼ ë‚˜íƒ€ë‚´ëŠ” 16ë°”ì´íŠ¸ ë°°ì—´ë¡œ ì‹œìž‘í•¨ 

    - ë‚˜ë¨¸ì§€ëŠ” ë§ì»¤ê°€ ëª©ì íŒŒì¼ì„ êµ¬ë¬¸ë¶„ì„í•˜ê³  í•´ì„í•˜ë„ë¡ í•˜ëŠ” ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìžˆìŒ

    - ì—¬ê¸°ì—ëŠ” ELF headerì˜ í¬ê¸°, ëª©ì íŒŒì¼ íƒ€ìž…(ì˜ˆ: ìž¬ë°°ì¹˜ ê°€ëŠ¥, ì‹¤í–‰ ê°€ëŠ¥, ê³µìœ ), ë¨¸ì‹  íƒ€ìž„(ì˜ˆ: x86-64), section header tableì˜ íŒŒì¼ ì˜¤í”„ì…‹, section header tableì˜ í¬ê¸°ì™€ ì—”íŠ¸ë¦¬ ìˆ˜ê°€ ë“¤ì–´ ìžˆë‹¤.

    - ì—¬ëŸ¬ ê°€ì§€ ì„¹ì…˜ë“¤ì˜ ìœ„ì¹˜ì™€ í¬ê¸°ëŠ” section header tableë¡œ ë‚˜íƒ€ë‚´ë©°, ì´ í…Œì´ë¸”ì€ ëª©ì íŒŒì¼ì˜ ê° ì„¹ì…˜ì— ëŒ€í•´ ê³ ì •ëœ í¬ê¸°ì˜ ì—”íŠ¸ë¦¬ë¥¼ ê°€ì§

- .text : ì»´íŒŒì¼ëœ í”„ë¡œê·¸ëž¨ì˜ ë¨¸ì‹  ì½”ë“œ

- .rodata printf : ë¬¸ìž¥ì˜ í¬ë§· ìŠ¤íŠ¸ë§, switch ë¬¸ì˜ ì í”„ í…Œì´ë¸”ê³¼ ê°™ì€ ì½ê¸°-í—ˆìš© ë°ì´í„°

- .data : **ì´ˆê¸°í™”ëœ C ì „ì—­ë³€ìˆ˜ ë° ì „ì—­ë³€ìˆ˜**ì´ë©°, ì‹¤ì œë¡œ íŒŒì¼ ì•ˆì— ê°’ì´ ì €ìž¥ë¨**(Disk ê³µê°„ ì°¨ì§€)**

    - int a = 10; â†’ Binary íŒŒì¼ì— ê¸°ë¡ë¨ â†’ aì˜ ì´ˆê¸°ê°’ 10ì´ í¬í•¨ëœ í˜•íƒœë¡œ .data ì„¹ì…˜ì— ì €ìž¥

    - ë§Œì•½ ì•„ëž˜ì²˜ëŸ¼ aê°€ ì§€ì—­ ë³€ìˆ˜ë¼ë©´? ì§€ì—­ ë³€ìˆ˜ëŠ” ìŠ¤íƒì— ë“¤ì–´ê°€ê¸° ë•Œë¬¸ì—, .dataì— ë“¤ì–´ê°€ì§€ ì•Šì•„
~~~c
void func() {
    int b;   // ì§€ì—­ ë³€ìˆ˜ ðŸ‘‰ ìŠ¤íƒì— ë“¤ì–´ê° â—
}
~~~

- .bss : **ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ C ì „ì—­ë³€ìˆ˜ì™€ ì •ì ë³€ìˆ˜ ê·¸ë¦¬ê³  0ìœ¼ë¡œ ì´ˆê¸°í™”ëœ ì „ì—­ë³€ìˆ˜ ë° ì •ì ë³€ìˆ˜**ì´ë©°, ì‹¤ì œ ê³µê°„ì„ ì°¨ì§€í•˜ì§€ ì•Šê³  ë‹¨ìˆœížˆ ìœ„ì¹˜ë¥¼ í‘œì‹œí•´(Disk ê³µê°„ ì°¨ì§€í•˜ì§€ ì•ŠìŒ)

    - int b; ë˜ëŠ” static int c; â†’ ì´ˆê¸°í™”ë˜ì§€ ì•Šì€ ì „ì—­/ì •ì  ë³€ìˆ˜ë¡œ .bss ê³µê°„ì— í•´ë‹¹

        - bì˜ ê°’ ë˜ëŠ” cì˜ ê°’ì´ ì“°ëž˜ê¸° ê°’ì´ë©´ ì–´ë–»ê²Œ ë ê¹Œ? ìš´ì˜ì²´ì œê°€ í”„ë¡œê·¸ëž¨ì„ ë©”ëª¨ë¦¬ì— ì˜¬ë¦´ ë•Œ, .bss ì˜ì—­ì— ìžˆëŠ” ë³€ìˆ˜ë“¤ì€ ìžë™ìœ¼ë¡œ 0ìœ¼ë¡œ ì±„ì›€!

    - int y = 0; â†’ 0ìœ¼ë¡œ ì´ˆê¸°í™”ëœ ì „ì—­/ì •ì  ë³€ìˆ˜ë¡œ .bss ê³µê°„ì— í•´ë‹¹

- rel.text : ë§ì»¤ê°€ ì´ ëª©ì íŒŒì¼ì„ ë‹¤ë¥¸ íŒŒì¼ë“¤ê³¼ ì—°ê²°í•  ë•Œ ìˆ˜ì •ë˜ì–´ì•¼ í•˜ëŠ” .text ì„¹ì…˜ ë‚´ ìœ„ì¹˜ë“¤ì˜ ë¦¬ìŠ¤íŠ¸

    - ì¼ë°˜ì ìœ¼ë¡œ ì™¸ë¶€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ ì „ì—­ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ì¸ìŠ¤íŠ¸ëŸ­ì…˜ë“¤ì€ ëª¨ë‘ ìˆ˜ì • ë˜ì–´ì•¼ í•˜ê³  ì´ ìˆ˜ì •ì„ ìœ„í•´ì„œ ìœ„ì¹˜ë“¤ì˜ ì •ë³´ë¥¼ ê°–ê³  ìžˆëŠ”ê²Œ ì•„ë‹ê¹Œ ì‹¶ë‹¤

- rel.data : í•´ë‹¹ ëª¨ë“ˆì— ì˜í•´ ì •ì˜ë˜ê±°ë‚˜ ì°¸ì¡°ë˜ëŠ” ì „ì—­ë³€ìˆ˜ë“¤ì— ëŒ€í•œ ìž¬ë°°ì¹˜ ì •ë³´

    - ì¼ë°˜ì ìœ¼ë¡œ ì´ˆê¸°ê°’ì´ ì „ì—­ë³€ìˆ˜ ë˜ëŠ” ì™¸ë¶€ì— ì •ì˜ëœ í•¨ìˆ˜ì˜ ì£¼ì†Œì¸ ì´ˆê¸°í™”ëœ ì „ì—­ë³€ìˆ˜ë“¤ ëª¨ë‘ ìˆ˜ì •ë˜ì–´ì•¼ í•œë‹¤

- .debug : í”„ë¡œê·¸ëž¨ ë‚´ì—ì„œ ì •ì˜ë„ë‹ˆ ì§€ì—­ë³€ìˆ˜ë“¤ê³¼ typedef, í”„ë¡œê·¸ëž¨ê³¼ ìµœì´ˆ C ì†ŒìŠ¤ íŒŒì¼ì—ì„œ ì •ì˜ë˜ê³  ì°¸ì¡°ë˜ëŠ” ì „ì—­ë³€ìˆ˜ë“¤ì„ ìœ„í•œ ì—”íŠ¸ë¦¬ë¥¼ ê°–ëŠ” **ë””ë²„ê¹… ì‹¬ë³¼ í…Œì´ë¸”**

    - ì»´íŒŒì¼ëŸ¬ ë“œë¼ì´ë²„ê°€ -g ì˜µì…˜ìœ¼ë¡œ ë¶ˆë¦° ê²½ìš°ì— ìƒì„±ë¨

- .line : ìµœì´ˆ C ì†ŒìŠ¤ í”„ë¡œê·¸ëž¨ê³¼ .text ì„¹ì…˜ ë‚´ ë¨¸ì‹  ì½”ë“œ ì¸ìŠ¤íŠ¸ëŸ­ì…˜ ë‚´ ë¼ì¸ ë²ˆí˜¸ë“¤ê°„ì˜ ë§¤í•‘

    - ì»´íŒŒì¼ëŸ¬ ë“œë¼ì´ë²„ê°€ -g ì˜µì…˜ìœ¼ë¡œ ë¶ˆë¦° ê²½ìš°ì— ìƒì„±ë¨

- .strtab : .strtabê³¼ .debug ì„¹ì…˜ë“¤ ë‚´ì— ìžˆëŠ” ì‹¬ë³¼ í…Œì´ë¸”ê³¼ ì„¹ì…˜ í—¤ë”ë“¤ì— ìžˆëŠ” ì„¹ì…˜ ì´ë¦„ë“¤ì„ ìœ„í•œ ìŠ¤íŠ¸ë§ í…Œì´ë¸”. ìŠ¤íŠ¸ë§ í…Œì´ë¸”ì€ ë„ ë¬¸ìžë¡œ ì¢…ë£Œëœ ìŠ¤íŠ¸ë§ì˜ ë°°ì—´

## ì‹¤í–‰ ê°€ëŠ¥ ëª©ì íŒŒì¼ì˜ ë¡œë”©

ìš°ë¦¬ê°€ ì‹¤í–‰ ê°€ëŠ¥ ëª©ì íŒŒì¼ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ì•„ëž˜ì™€ ê°™ì€ ëª…ë ¹ì–´ë¥¼ íƒ€ìž…í•´
~~~bash
linux> ./prog
~~~

